(self.webpackChunkprsdigg=self.webpackChunkprsdigg||[]).push([[7863],{49101:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},l=r(59418),i=function(e,t){return n.createElement(l.Z,Object.assign({},e,{ref:t,icon:a}))};i.displayName="PlusOutlined";var c=n.forwardRef(i)},12028:function(e,t,r){"use strict";r.d(t,{Z:function(){return E}});var n=r(22122),a=r(96156),l=r(67294),i=r(28481),c=r(81253),o=r(94184),s=r.n(o),u=r(21770),m=r(15105),f=l.forwardRef((function(e,t){var r,n=e.prefixCls,o=void 0===n?"rc-switch":n,f=e.className,d=e.checked,p=e.defaultChecked,b=e.disabled,h=e.loadingIcon,j=e.checkedChildren,v=e.unCheckedChildren,y=e.onClick,g=e.onChange,E=e.onKeyDown,Z=(0,c.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),w=(0,u.Z)(!1,{value:d,defaultValue:p}),C=(0,i.Z)(w,2),_=C[0],O=C[1];function k(e,t){var r=_;return b||(O(r=e),null===g||void 0===g||g(r,t)),r}var N=s()(o,f,(r={},(0,a.Z)(r,"".concat(o,"-checked"),_),(0,a.Z)(r,"".concat(o,"-disabled"),b),r));return l.createElement("button",Object.assign({},Z,{type:"button",role:"switch","aria-checked":_,disabled:b,className:N,ref:t,onKeyDown:function(e){e.which===m.Z.LEFT?k(!1,e):e.which===m.Z.RIGHT&&k(!0,e),null===E||void 0===E||E(e)},onClick:function(e){var t=k(!_,e);null===y||void 0===y||y(t,e)}}),h,l.createElement("span",{className:"".concat(o,"-inner")},_?j:v))}));f.displayName="Switch";var d=f,p=r(7085),b=r(69304),h=r(65632),j=r(97647),v=r(21687),y=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},g=l.forwardRef((function(e,t){var r,i=e.prefixCls,c=e.size,o=e.loading,u=e.className,m=void 0===u?"":u,f=e.disabled,g=y(e,["prefixCls","size","loading","className","disabled"]);(0,v.Z)("checked"in g||!("value"in g),"Switch","`value` is not a valid prop, do you mean `checked`?");var E=l.useContext(h.E_),Z=E.getPrefixCls,w=E.direction,C=l.useContext(j.Z),_=Z("switch",i),O=l.createElement("div",{className:"".concat(_,"-handle")},o&&l.createElement(p.Z,{className:"".concat(_,"-loading-icon")})),k=s()((r={},(0,a.Z)(r,"".concat(_,"-small"),"small"===(c||C)),(0,a.Z)(r,"".concat(_,"-loading"),o),(0,a.Z)(r,"".concat(_,"-rtl"),"rtl"===w),r),m);return l.createElement(b.Z,{insertExtraNode:!0},l.createElement(d,(0,n.Z)({},g,{prefixCls:_,className:k,disabled:f||o,ref:t,loadingIcon:O})))}));g.__ANT_SWITCH=!0,g.displayName="Switch";var E=g},27883:function(e,t,r){"use strict";r(39992)},77139:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return L}});r(27883);var n=r(12028),a=(r(61768),r(8834)),l=(r(51872),r(19650)),i=(r(75257),r(51890)),c=(r(14564),r(48835)),o=(r(945),r(3785)),s=(r(39200),r(55019)),u=(r(13816),r(37744)),m=(r(67167),r(71577)),f=(r(96498),r(11382)),d=(r(58481),r(48086)),p=(r(38319),r(86585)),b=r(67294),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},j=r(59418),v=function(e,t){return b.createElement(j.Z,Object.assign({},e,{ref:t,icon:h}))};v.displayName="MinusCircleOutlined";var y=b.forwardRef(v),g=r(49101),E=r(2826),Z=r(86921),w=r(58580),C=(r(74407),r(31097)),_=(r(3829),r(60331));function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,l=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e){var t=e.tags,r=e.setTags,n=O((0,b.useState)(!1),2),a=n[0],l=n[1],i=O((0,b.useState)(""),2),c=i[0],o=i[1],u=O((0,b.useState)(-1),2),m=u[0],f=u[1],d=O((0,b.useState)(""),2),p=d[0],h=d[1],j=(0,b.useRef)(null),v=(0,b.useRef)(null);(0,b.useEffect)((function(){a&&j.current.focus()}),[a]),(0,b.useEffect)((function(){-1!==m&&v.current.focus()}),[m]);var y=function(){c&&-1===t.indexOf(c)&&r([].concat(t,[c])),o(""),l(!1)},E=function(){var e=[].concat(t);e[m]=p,r(e),h(""),f(-1)};return b.createElement("div",null,t.map((function(e,n){if(m===n)return b.createElement(s.Z,{ref:v,style:{width:78,marginRight:8,verticalAlign:"top"},size:"small",key:e,value:p,onChange:function(e){return h(e.target.value)},onBlur:E,onPressEnter:E});var a=e.length>20,l=b.createElement(_.Z,{key:e,closable:!0,onClose:function(){return n=e,r(t.filter((function(e){return e!==n})));var n}},b.createElement("span",{onDoubleClick:function(t){0!==n&&(f(n),h(e),v.current.focus(),t.preventDefault())}},"#",a?e.slice(0,20)+"...":e));return a?b.createElement(C.Z,{title:e,key:e},l):l})),a&&b.createElement(s.Z,{ref:j,style:{width:78,marginRight:8,verticalAlign:"top"},size:"small",type:"text",value:c,onChange:function(e){return o(e.target.value)},onBlur:y,onPressEnter:y}),!a&&b.createElement(_.Z,{style:{background:"#fff",borderStyle:"dashed"},onClick:function(){return l(!0)}},b.createElement(g.Z,null)," New Tag"))}var x=r(67823),I=r(6799),S=r(39387),P=r(30381),z=r.n(P),T=r(8134),R=r(73727),q=r(5977);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,l=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V(e){var t=e.article,r=(0,T.$)(),n=r.t,a=r.i18n,l=((0,q.k6)(),D(p.Z.useForm(),1)[0]),i=D((0,b.useState)(t.tagNames||[]),2),c=i[0],h=i[1],j=D((0,b.useState)(!1),2),v=j[0],y=j[1];z().locale(a.language);var g=D((0,S.Mq1)({onError:function(){d.ZP.error(n("failed_to_save"))}}),2),w=g[0],C=g[1].loading,_=(0,Z.Z)((function(){return w({variables:{input:{uuid:t.uuid,content:l.getFieldValue("content"),title:l.getFieldValue("title"),intro:l.getFieldValue("intro"),tagNames:c}}})}),{wait:1e3}).run;return b.createElement(b.Fragment,null,b.createElement(u.Z,{title:n("write"),subTitle:C?b.createElement(f.Z,{size:"small"}):b.createElement("span",{className:"p-2 text-xs bg-gray-200 rounded"},z()(t.updatedAt).format("HH:MM:ss")+" "+n("saved")),extra:[b.createElement(m.Z,{key:"publish",type:"primary",onClick:function(){l.validateFields().then((function(){return y(!0)})).catch((function(){return d.ZP.warn(n("article.form.not_finished"))}))}},n("publish"))],breadcrumb:{routes:[{path:"/articles",breadcrumbName:n("articles_manage")},{path:"",breadcrumbName:n("write")}],itemRender:function(e,t,r,n){return r.indexOf(e)===r.length-1?b.createElement("span",null,e.breadcrumbName):b.createElement(R.rU,{to:e.path},e.breadcrumbName)}}}),b.createElement(p.Z,{form:l,initialValues:{title:t.title,content:t.content,intro:t.intro},labelCol:{span:2},wrapperCol:{span:22},onValuesChange:function(){return _()}},b.createElement(p.Z.Item,{label:n("article.title"),name:"title",rules:[{required:!0,message:n("article.form.title_is_required")},{max:64,message:n("article.form.title_is_too_long")}]},b.createElement(s.Z,{placeholder:n("article.form.title_place_holder")})),b.createElement(p.Z.Item,{label:n("article.content"),name:"content",rules:[{required:!0,message:n("article.form.content_is_required")}]},b.createElement(E.ZP,{textareaProps:{placeholder:n("article.form.content_place_holder")},previewOptions:F({},I.$1),preview:"edit",autoFocus:!1,height:700,commands:[E.CN.Se,E.CN.pU,E.CN.mW,E.CN.hr,E.CN.TN,E.CN.qE,E.CN.p4,E.CN.TU,I.H7,E.CN.qE,E.CN.GH,E.CN.Vf]})),b.createElement(p.Z.Item,{label:n("article.intro"),name:"intro",rules:[{required:!0,message:n("article.form.intro_is_required")},{max:140,message:n("article.form.intro_is_too_long")}]},b.createElement(s.Z.TextArea,{placeholder:n("article.form.intro_place_holder")})),b.createElement(p.Z.Item,{label:n("article.tags")},b.createElement(N,{tags:c,setTags:function(e){h(e),_()}}))),b.createElement(o.Z,{title:n("publish_article"),visible:v,onCancel:function(){return y(!1)},width:768,centered:!0,footer:null},b.createElement($,{article:t})))}function $(e){var t,r=e.article,s=(0,T.$)().t,u=(0,q.k6)(),f=D(p.Z.useForm(),1)[0],h=D((0,b.useState)(r.assetId),2),j=h[0],v=h[1],E=D((0,b.useState)(r.price),2),Z=E[0],C=E[1],_=D((0,b.useState)(!1),2),O=_[0],k=_[1],N=D((0,b.useState)(""),2),I=N[0],P=N[1],z=(0,w.Z)(I,{wait:1e3}),R=D((0,b.useState)(.5),2),A=R[0],M=R[1],U=(0,S.Xtc)(),V=U.loading,$=U.data,H=(0,S.yNM)({variables:{type:"available",query:z}}).data,W=D((0,S.aW_)({update:function(e,t){t.data.publishArticle?u.replace("/articles/"+r.uuid):d.ZP.error(s("failed_to_publish"))}}),2),K=W[0],B=W[1].loading;if(V)return b.createElement(x.Z,null);var Y=$.pricableCurrencies,G=(null==H||null==(t=H.myArticleConnection)?void 0:t.nodes)||[],L=Y.find((function(e){return e.assetId===j}));return b.createElement(b.Fragment,null,b.createElement(p.Z,{form:f,initialValues:{assetId:j,price:Z},labelCol:{span:4},wrapperCol:{span:20},onValuesChange:function(e,t){var r=t.articleReferences;if(r){var n=r.reduce((function(e,t){return e+((null==t?void 0:t.revenueRatio)||0)}),0);M(n<.5?.5-n:0)}},onFinish:function(e){o.Z.confirm({title:s("confirm_to_publish"),centered:!0,okText:s("publish"),cancelText:s("later"),onOk:function(){return K({variables:{input:F(F({},e),{},{uuid:r.uuid})}})}})}},b.createElement(p.Z.Item,{label:s("article.price"),extra:Z>0?"\u2248 $"+(L.priceUsd*Z).toFixed(4):s("article.form.you_will_create_a_free_article")},b.createElement(l.Z,null,b.createElement(p.Z.Item,{name:"price",noStyle:!0,dependencies:["assetId"],rules:[{required:!0},{validator:function(e,t){return"BTC"===L.symbol&&(0===t||t>=1e-6)?Promise.resolve():Promise.reject(s("article.form.price_is_too_low"))}}]},b.createElement(c.Z,{onChange:function(e){return C(parseFloat(e.toString()))},style:{minWidth:130},min:0,step:"0.000001",precision:6,placeholder:"0.0"})),b.createElement(p.Z.Item,{name:"assetId",noStyle:!0,rules:[{required:!0}]},b.createElement(a.Z,{onSelect:function(e){return v(e)}},Y.map((function(e){return b.createElement(a.Z.Option,{key:e.assetId,value:e.assetId},b.createElement(l.Z,null,b.createElement(i.C,{size:"small",src:e.iconUrl}),e.symbol))})))))),b.createElement(p.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.articleReferences!==t.articleReferences}},b.createElement(p.Z.Item,{label:s("readers_revenue")},b.createElement(c.Z,{disabled:!0,value:.4,formatter:function(e){return 100*e+"%"}})),b.createElement(p.Z.Item,{label:s("platform_revenue")},b.createElement(c.Z,{disabled:!0,value:.1,formatter:function(e){return 100*e+"%"}})),b.createElement(p.Z.Item,{label:s("author_revenue")},b.createElement(c.Z,{disabled:!0,value:A,formatter:function(e){return Math.floor(100*e)+"%"}})),b.createElement(p.Z.Item,{label:s("references_revenue")},b.createElement(p.Z.Item,null,b.createElement(n.Z,{checked:O,onChange:function(e){k(e),e||(f.setFieldsValue({articleReferences:[]}),M(.5))}})),O&&b.createElement(p.Z.List,{name:"articleReferences"},(function(e,t){var r=t.add,n=t.remove;return b.createElement(b.Fragment,null,e.map((function(e,t){return b.createElement("div",{className:"flex flex-wrap items-baseline w-full space-x-2",key:t},b.createElement(p.Z.Item,{noStyle:!0},b.createElement(p.Z.Item,Object.assign({},e,{className:"flex-1 flex-nowrap",fieldKey:[e.fieldKey,"referenceId"],name:[e.name,"referenceId"],label:s("article.article_text"),rules:[{required:!0,message:s("article.form.please_select_an_article")}]}),b.createElement(a.Z,{allowClear:!0,showSearch:!0,filterOption:!1,onSearch:function(e){return P(e)},onChange:function(){return P("")},options:G.map((function(e){return{label:b.createElement("div",{className:"flex items-center truncate flex-nowrap space-x-2"},b.createElement("img",{className:"w-6 h-6 rounded-full",src:e.author.avatar}),b.createElement("span",null,e.author.name,":"),b.createElement("span",null,e.title)),value:e.uuid}}))}))),b.createElement(p.Z.Item,Object.assign({className:"flex-1"},e,{fieldKey:[e.fieldKey,"revenueRatio"],name:[e.name,"revenueRatio"],rules:[{required:!0,message:s("article.form.please_input_revenue_ratio")},{validator:function(){var e=f.getFieldValue("articleReferences"),t=null==e?void 0:e.reduce((function(e,t){return e+((null==t?void 0:t.revenueRatio)||0)}),0);return t&&t>=.5?Promise.reject(new Error(s("article.form.references_revenue_cannot_larger_than_50%"))):Promise.resolve()}}],label:s("article.form.revenue_ratio")}),b.createElement(c.Z,{min:.01,max:.49,step:"0.01",formatter:function(e){return 100*e+"%"},parser:function(e){return parseInt(e.replace("%",""))/100}})),b.createElement(y,{onClick:function(){return n(e.name)}}))})),b.createElement(p.Z.Item,null,b.createElement(m.Z,{type:"dashed",disabled:e.length>=10,onClick:function(){return e.length<10&&r({revenueRatio:.05})},block:!0,icon:b.createElement(g.Z,null)},s("article.form.add_reference"))))})))),b.createElement(p.Z.Item,{wrapperCol:{xs:{offset:0},sm:{offset:4}}},b.createElement(m.Z,{type:"primary",htmlType:"submit",loading:B},s("create")))))}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,l=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(e){var t=e.article,r=B(p.Z.useForm(),1)[0],n=B((0,b.useState)(0),2),f=n[0],h=n[1],j=(0,q.k6)(),v=(0,T.$)().t,y=B((0,b.useState)(t.tagNames||[]),2),g=y[0],Z=y[1],w=B((0,S.Mq1)({update:function(e,r){var n=r.data.updateArticle.error;n?d.ZP.error(n):(d.ZP.success(v("success_submitted")),j.replace("/articles/"+t.uuid))}}),2),C=w[0],_=w[1].loading;return b.createElement(b.Fragment,null,b.createElement(u.Z,{title:v("edit_article"),breadcrumb:{routes:[{path:"/articles",breadcrumbName:v("articles_manage")},{path:"/articles/"+t.uuid,breadcrumbName:t.title||z()(t.createdAt).format("YYYY-MM-DD HH:MM")},{path:"",breadcrumbName:v("edit_article")}],itemRender:function(e,t,r,n){return r.indexOf(e)===r.length-1?b.createElement("span",null,e.breadcrumbName):b.createElement(R.rU,{to:e.path},e.breadcrumbName)}}}),b.createElement(p.Z,{form:r,initialValues:{uuid:t.uuid,title:t.title,intro:t.intro,content:t.content,price:t.price,assetId:t.assetId},labelCol:{span:4},wrapperCol:{span:20},onFinish:function(e){var r=e.uuid,n=e.title,a=e.content,l=e.price,i=e.intro;n&&a&&(l===t.price||l)&&i?o.Z.confirm({title:v("article.form.confirm_to_update"),centered:!0,okText:v("update"),cancelText:v("later"),onOk:function(){return C({variables:{input:{uuid:r,title:n,content:a,price:l,intro:i,tagNames:g}}})}}):d.ZP.warn(v("article.form.not_finished"))}},b.createElement(p.Z.Item,{style:{display:"none"},name:"uuid"},b.createElement(s.Z,null)),b.createElement(p.Z.Item,{label:v("article.title"),name:"title"},b.createElement(s.Z,{placeholder:v("article.form.title_place_holder")})),b.createElement(p.Z.Item,{label:v("article.content"),name:"content"},b.createElement(E.ZP,{textareaProps:{placeholder:v("article.form.content_place_holder")},previewOptions:W({},I.$1),autoFocus:!1,preview:"edit",height:500,commands:[E.CN.Se,E.CN.pU,E.CN.mW,E.CN.hr,E.CN.TN,E.CN.qE,E.CN.p4,E.CN.TU,I.H7,E.CN.qE,E.CN.GH,E.CN.Vf]})),b.createElement(p.Z.Item,{label:v("article.intro"),name:"intro"},b.createElement(s.Z.TextArea,{placeholder:v("article.form.intro_place_holder")})),b.createElement(p.Z.Item,{label:v("article.tags")},b.createElement(N,{tags:g,setTags:Z})),b.createElement(p.Z.Item,{label:v("article.price"),extra:"\u2248 $"+(t.currency.priceUsd*(f||t.price)).toFixed(4)},b.createElement(l.Z,null,b.createElement(p.Z.Item,{name:"price",noStyle:!0,rules:[{required:!0},{validator:function(e,r){return"BTC"===t.currency.symbol&&r>=1e-6||t.price==r?Promise.resolve():Promise.reject(v("article.form.price_is_too_low"))}}]},b.createElement(c.Z,{disabled:0===t.price,onChange:function(e){return h(parseFloat(e.toString()))},style:{minWidth:130},min:1e-6,step:"0.000001",precision:6,placeholder:"0.0"})),b.createElement(p.Z.Item,{name:"assetId",noStyle:!0,rules:[{required:!0}]},b.createElement(a.Z,{disabled:!0},b.createElement(a.Z.Option,{key:t.currency.assetId,value:t.currency.assetId},b.createElement(l.Z,null,b.createElement(i.C,{size:"small",src:t.currency.iconUrl}),t.currency.symbol)))))),b.createElement(p.Z.Item,{label:v("readers_revenue")},b.createElement(c.Z,{disabled:!0,value:t.readersRevenueRatio,formatter:function(e){return 100*e+"%"}})),b.createElement(p.Z.Item,{label:v("platform_revenue")},b.createElement(c.Z,{disabled:!0,value:t.platformRevenueRatio,formatter:function(e){return 100*e+"%"}})),b.createElement(p.Z.Item,{label:v("author_revenue")},b.createElement(c.Z,{disabled:!0,value:t.authorRevenueRatio,formatter:function(e){return Math.floor(100*e)+"%"}})),t.articleReferences.length>0&&b.createElement(p.Z.Item,{label:v("article_references")},t.articleReferences.map((function(e){return b.createElement(p.Z.Item,{key:e.reference.uuid},b.createElement("div",{className:"flex flex-wrap items-center"},b.createElement(i.C,{className:"mr-2",size:"small",src:e.reference.author.avatar}),b.createElement("span",{className:"mr-2"},e.reference.author.name,":"),b.createElement("a",{href:"/articles/"+e.reference.uuid,target:"_blank"},e.reference.title),b.createElement("div",{className:"ml-auto text-blue-500"},100*e.revenueRatio,"%")))}))),b.createElement(p.Z.Item,{wrapperCol:{xs:{offset:0},sm:{offset:4}}},b.createElement(m.Z,{type:"primary",htmlType:"submit",loading:_},v("update")))))}function L(){var e=(0,q.UO)().uuid,t=((0,q.k6)(),(0,T.$)().t,(0,S.YVq)({fetchPolicy:"network-only",variables:{uuid:e}})),r=t.data;if(t.loading)return b.createElement(x.Z,null);var n=r.myArticle;return b.createElement(b.Fragment,null,"drafted"===n.state?b.createElement(V,{article:n}):b.createElement(G,{article:n}))}},91296:function(e,t,r){var n=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,i=/^0o[0-7]+$/i,c=parseInt,o="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,s="object"==typeof self&&self&&self.Object===Object&&self,u=o||s||Function("return this")(),m=Object.prototype.toString,f=Math.max,d=Math.min,p=function(){return u.Date.now()};function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==m.call(e)}(e))return NaN;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var r=l.test(e);return r||i.test(e)?c(e.slice(2),r?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,r){var n,a,l,i,c,o,s=0,u=!1,m=!1,j=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var r=n,l=a;return n=a=void 0,s=t,i=e.apply(l,r)}function y(e){return s=e,c=setTimeout(E,t),u?v(e):i}function g(e){var r=e-o;return void 0===o||r>=t||r<0||m&&e-s>=l}function E(){var e=p();if(g(e))return Z(e);c=setTimeout(E,function(e){var r=t-(e-o);return m?d(r,l-(e-s)):r}(e))}function Z(e){return c=void 0,j&&n?v(e):(n=a=void 0,i)}function w(){var e=p(),r=g(e);if(n=arguments,a=this,o=e,r){if(void 0===c)return y(o);if(m)return c=setTimeout(E,t),v(o)}return void 0===c&&(c=setTimeout(E,t)),i}return t=h(t)||0,b(r)&&(u=!!r.leading,l=(m="maxWait"in r)?f(h(r.maxWait)||0,t):l,j="trailing"in r?!!r.trailing:j),w.cancel=function(){void 0!==c&&clearTimeout(c),s=0,n=o=a=c=void 0},w.flush=function(){return void 0===c?i:Z(p())},w}},46700:function(e,t,r){var n={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":15596,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":15596,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function a(e){var t=l(e);return r(t)}function l(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=l,e.exports=a,a.id=46700}}]);
//# sourceMappingURL=7863-ea68e8cd6e78139c2f7c.chunk.js.map
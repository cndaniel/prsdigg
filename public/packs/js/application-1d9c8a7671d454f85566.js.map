{"version":3,"file":"js/application-1d9c8a7671d454f85566.js","mappings":"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","sources":["webpack://prsdigg/./app/packs/apps/application/components/LoadingComponent/LoadingComponent.tsx","webpack://prsdigg/./app/packs/apps/application/components/LoginModalComponent/LoginModalComponent.tsx","webpack://prsdigg/./app/packs/apps/application/shared/constants/index.ts","webpack://prsdigg/./app/packs/apps/application/shared/utils/handleShare.tsx","webpack://prsdigg/./app/packs/apps/application/components/MenuComponent/MenuComponent.tsx","webpack://prsdigg/./app/packs/apps/application/components/HeaderComponent/HeaderComponent.tsx","webpack://prsdigg/./app/packs/apps/application/Routes.tsx","webpack://prsdigg/./app/packs/entrypoints/application.js","webpack://prsdigg/./app/packs/apps/application/App.tsx"],"sourcesContent":["import { Spin } from 'antd';\nimport React from 'react';\n\nexport default function LoadingComponent() {\n  return (\n    <div style={{ width: '100%', padding: '2rem', textAlign: 'center' }}>\n      <Spin />\n    </div>\n  );\n}\n","import { Modal, Spin } from 'antd';\nimport { imagePath, usePrsdigg } from 'apps/shared';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport default function LoginModalComponent(props: { children: JSX.Element }) {\n  const { children } = props;\n  const { t } = useTranslation();\n  const [visible, setVisible] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const { messenger } = usePrsdigg();\n\n  return (\n    <>\n      {React.cloneElement(children, { onClick: () => setVisible(true) })}\n      <Modal\n        title={t('connect_wallet')}\n        centered\n        maskClosable\n        visible={visible}\n        onCancel={() => {\n          setVisible(false);\n          setLoading(false);\n        }}\n        footer={null}\n      >\n        <Spin spinning={loading}>\n          <div\n            className='flex items-center justify-center w-full py-2 text-lg bg-gray-100 cursor-pointer rounded-md space-x-2'\n            onClick={() => {\n              setLoading(true);\n              location.replace(\n                `/login?return_to=${encodeURIComponent(location.href)}`,\n              );\n            }}\n          >\n            {messenger === 'mixin' ? (\n              <>\n                <img className='w-10 h-10' src={imagePath('mixin-logo.png')} />\n                <span>Mixin Messenger</span>\n              </>\n            ) : (\n              <img className='h-10' src={imagePath('links-logo.png')} />\n            )}\n          </div>\n        </Spin>\n      </Modal>\n    </>\n  );\n}\n","export const PRS_ICON_URL =\n  'https://mixin-images.zeromesh.net/1fQiAdit_Ji6_Pf4tW8uzutONh9kurHhAnN4wqEIItkDAvFTSXTMwlk3AB749keufDFVoqJb5fSbgz7K2HoOV7Q=s128';\nexport const PRSDIGG_ICON_URL =\n  'https://mixin-images.zeromesh.net/L0egX-GZxT0Yh-dd04WKeAqVNRzgzuj_Je_-yKf8aQTZo-xihd-LogbrIEr-WyG9WbJKGFvt2YYx-UIUa1qQMRla=s256';\nexport const BUNSHOW_ICON_URL =\n  'https://mixin-images.zeromesh.net/Dmoi5wjK1PEm_idEEF5Wlu88UJDZ_9JAHGJ9i8n51MMvUisXjlYlWKnC1NLWTk7Hj2krxnCfu_njyKE3qctTli3RCqkwjWdZbiA=s256';\nexport const OPEN_SOURCE_URL = 'https://github.com/baizhiheizi/prsdigg';\nexport const CHINESE_MIXIN_GROUP_AVATAR_URL =\n  'https://mixin-images.zeromesh.net/bFHtb9v2QQTgAFrZiDzNQgo7mbaFoRhnOcRf0pCU_CFCGgYMNSbi8E3D0NVW5u1AxZD2kI1MtmLLb2tqE4P4jw=s256';\nexport const CHINESE_MIXIN_GROUP_DESCRIPTION =\n  '顶瓜瓜（PRSDigg）官方中文社区，欢迎加入讨论任何顶瓜瓜相关的事情';\nexport const CHINESE_MIXIN_GROUP_APP_ID =\n  '74c6a598-345b-46ca-891f-b15c3139557b';\nexport const CHINESE_MIXIN_GROUP_CODE_ID =\n  'd9c39065-5021-454b-b2f5-bd95116e906d';\n","import { ShareAltOutlined, CopyOutlined } from '@ant-design/icons';\nimport { Dropdown, Menu, message } from 'antd';\nimport { imagePath, usePrsdigg, useUserAgent } from 'apps/shared';\nimport copy from 'copy-to-clipboard';\nimport { Article, Tag } from 'graphqlTypes';\nimport { encode as encode64 } from 'js-base64';\nimport React, { ReactChild, ReactChildren } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  FacebookIcon,\n  FacebookShareButton,\n  TwitterIcon,\n  TwitterShareButton,\n} from 'react-share';\n\nexport const handleArticleShare = (\n  article: Partial<Article>,\n  appId: string,\n  logoFile?: string,\n) => {\n  const articleUrl = `${location.origin}/articles/${article.uuid}`;\n  const data = {\n    action: articleUrl,\n    app_id: appId,\n    description: `${article.author.name}`,\n    icon_url: `${imagePath(logoFile || 'logo.png')}`,\n    title: article.title.slice(0, 36),\n  };\n  location.replace(\n    `mixin://send?category=app_card&data=${encodeURIComponent(\n      encode64(JSON.stringify(data)),\n    )}`,\n  );\n};\n\nexport const handleTagShare = (\n  tag: Partial<Tag>,\n  mixinEnv: boolean,\n  appId: string,\n  logoFile?: string,\n) => {\n  const tagUrl = `${location.origin}/tags/${tag.id}`;\n  const data = {\n    action: tagUrl,\n    app_id: appId,\n    description: `x ${tag.articlesCount}`,\n    icon_url: `${imagePath(logoFile || 'logo.png')}`,\n    title: `#${tag.name}`,\n  };\n  handleShare(tagUrl, data, mixinEnv);\n};\n\nexport const handleShare = (\n  url: string,\n  appCardData: object,\n  mixinEnv: boolean,\n) => {\n  if (mixinEnv) {\n    location.replace(\n      `mixin://send?category=app_card&data=${encodeURIComponent(\n        encode64(JSON.stringify(appCardData)),\n      )}`,\n    );\n  } else {\n    copy(url);\n    message.success('Copied');\n  }\n};\n\nexport function ArticleShareButton(props: {\n  article: Partial<Article>;\n  children: ReactChild | ReactChildren;\n}) {\n  const { mixinEnv } = useUserAgent();\n  const { t } = useTranslation();\n  const { logoFile, twitterAccount, appName, appId } = usePrsdigg();\n  const { article, children } = props;\n  const shareUrl = `${location.origin}/articles/${article.uuid}`;\n  return (\n    <Dropdown\n      trigger={['click', 'hover']}\n      overlay={\n        <Menu>\n          {mixinEnv && (\n            <Menu.Item\n              key='mixin'\n              onClick={() => {\n                handleArticleShare(article, appId, logoFile);\n              }}\n            >\n              <div className='flex items-center space-x-2'>\n                <ShareAltOutlined />\n                <span>{t('mixin_contact')}</span>\n              </div>\n            </Menu.Item>\n          )}\n          <Menu.Item key='twittier'>\n            <TwitterShareButton\n              url={shareUrl}\n              title={article.title}\n              hashtags={article.tagNames}\n              via={twitterAccount}\n            >\n              <div className='flex items-center space-x-2'>\n                <TwitterIcon size={16} round={true} />\n                <span>Twitter</span>\n              </div>\n            </TwitterShareButton>\n          </Menu.Item>\n          <Menu.Item key='facebook'>\n            <FacebookShareButton\n              url={shareUrl}\n              quote={article.title}\n              hashtag={appName}\n            >\n              <div className='flex items-center space-x-2'>\n                <FacebookIcon size={16} round={true} />\n                <span>Facebook</span>\n              </div>\n            </FacebookShareButton>\n          </Menu.Item>\n          <Menu.Item\n            key='url'\n            onClick={() => {\n              copy(shareUrl);\n              message.success(t('copied'));\n            }}\n          >\n            <div className='flex items-center space-x-2'>\n              <CopyOutlined />\n              <span>{t('copy_url')}</span>\n            </div>\n          </Menu.Item>\n        </Menu>\n      }\n    >\n      {children}\n    </Dropdown>\n  );\n}\n","import {\n  GithubOutlined,\n  GlobalOutlined,\n  NotificationOutlined,\n} from '@ant-design/icons';\nimport { Badge, Col, Menu, Row } from 'antd';\nimport { OPEN_SOURCE_URL } from 'apps/application/shared';\nimport { imagePath, useCurrentUser, usePrsdigg } from 'apps/shared';\nimport { useCreateArticleMutation } from 'graphqlTypes';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\nimport LoginModalComponent from '../LoginModalComponent/LoginModalComponent';\n\nexport default function MenuComponent(props: {\n  mode: 'horizontal' | 'vertical';\n  setDrawerVisible?: (visible: boolean) => void;\n}) {\n  const { currentUser } = useCurrentUser();\n  const { logoFile } = usePrsdigg();\n  const { mode, setDrawerVisible } = props;\n  const { t, i18n } = useTranslation();\n\n  const [createArticle] = useCreateArticleMutation({\n    update: (\n      _,\n      {\n        data: {\n          createArticle: { uuid },\n        },\n      },\n    ) => {\n      location.replace(`/dashboard/articles/${uuid}/edit`);\n    },\n  });\n\n  const toggleDrawer = () => {\n    setDrawerVisible && setDrawerVisible(false);\n  };\n\n  return (\n    <Row\n      justify='center'\n      style={\n        mode === 'horizontal'\n          ? { flexWrap: 'nowrap' }\n          : { flexDirection: 'column', textAlign: 'center' }\n      }\n    >\n      <Col>\n        {currentUser && mode === 'vertical' ? (\n          <a\n            className='flex items-center justify-center block h-full m-4'\n            href='/dashboard'\n          >\n            <img className='w-10 h-10 rounded-full' src={currentUser.avatar} />\n          </a>\n        ) : (\n          <Link\n            className='flex items-center justify-center h-full mx-4'\n            to='/'\n            replace\n          >\n            <img className='w-10 h-10' src={imagePath(logoFile)} />\n          </Link>\n        )}\n      </Col>\n      <Col flex={1}>\n        <Menu theme='light' mode={mode} selectable={false}>\n          <Menu.Item key='read' onClick={toggleDrawer}>\n            <Link to='/' replace>\n              {t('read')}\n            </Link>\n          </Menu.Item>\n          <Menu.Item key='write' onClick={toggleDrawer}>\n            {currentUser ? (\n              <a onClick={() => createArticle()}>{t('write')}</a>\n            ) : (\n              <LoginModalComponent>\n                <a>{t('write')}</a>\n              </LoginModalComponent>\n            )}\n          </Menu.Item>\n          <Menu.Item key='search' onClick={toggleDrawer}>\n            <Link to='/search' replace>\n              {t('search')}\n            </Link>\n          </Menu.Item>\n          <Menu.Item key='rules' onClick={toggleDrawer}>\n            <Link to='/rules' replace>\n              {t('rules')}\n            </Link>\n          </Menu.Item>\n          <Menu.Item key='fair' onClick={toggleDrawer}>\n            <Link to='/fair' replace>\n              {t('fair')}\n            </Link>\n          </Menu.Item>\n          <Menu.Item key='open_source' onClick={toggleDrawer}>\n            <a href={OPEN_SOURCE_URL} target='_blank'>\n              <GithubOutlined className='mr-2' />\n              {t('open_source')}\n            </a>\n          </Menu.Item>\n        </Menu>\n      </Col>\n      <Col flex={1}>\n        <Menu theme='light' mode={mode} selectable={false}>\n          {i18n.languages.length > 1 && (\n            <>\n              <Menu.SubMenu\n                className='ml-auto'\n                key='global'\n                title={\n                  mode === 'horizontal' ? (\n                    <GlobalOutlined />\n                  ) : i18n.language.includes('en') ? (\n                    'Language'\n                  ) : i18n.language.includes('ja') ? (\n                    '言語'\n                  ) : (\n                    '语言'\n                  )\n                }\n              >\n                {i18n.languages.map((lng) => {\n                  if (lng.includes('CN')) {\n                    return (\n                      <Menu.Item key={lng}>\n                        <a onClick={() => i18n.changeLanguage('zh-CN')}>中文</a>\n                      </Menu.Item>\n                    );\n                  } else if (lng.includes('en')) {\n                    return (\n                      <Menu.Item key={lng}>\n                        <a onClick={() => i18n.changeLanguage('en')}>EN</a>\n                      </Menu.Item>\n                    );\n                  } else if (lng.includes('ja')) {\n                    return (\n                      <Menu.Item key={lng}>\n                        <a onClick={() => i18n.changeLanguage('ja')}>日本語</a>\n                      </Menu.Item>\n                    );\n                  }\n                })}\n              </Menu.SubMenu>\n            </>\n          )}\n          {currentUser ? (\n            <>\n              <Menu.Item\n                className={i18n.languages.length < 2 && 'ml-auto'}\n                key='notifications'\n                onClick={toggleDrawer}\n              >\n                <Badge dot={currentUser.unreadNotificationsCount > 0}>\n                  <a href='/dashboard/notifications'>\n                    {mode === 'horizontal' ? (\n                      <NotificationOutlined />\n                    ) : (\n                      t('notifications_manage')\n                    )}\n                  </a>\n                </Badge>\n              </Menu.Item>\n              <Menu.Item key='dashboard' onClick={toggleDrawer}>\n                <a href='/dashboard' target='_blank'>\n                  {t('dashboard')}\n                </a>\n              </Menu.Item>\n              <Menu.Item key='logout' onClick={toggleDrawer}>\n                <a href='/logout'>{t('logout')}</a>\n              </Menu.Item>\n            </>\n          ) : (\n            <Menu.Item key='login' onClick={toggleDrawer}>\n              <LoginModalComponent>\n                <a>{t('connect_wallet')}</a>\n              </LoginModalComponent>\n            </Menu.Item>\n          )}\n        </Menu>\n      </Col>\n    </Row>\n  );\n}\n","import { MenuOutlined } from '@ant-design/icons';\nimport { Left as LeftIcon } from '@icon-park/react';\nimport { Button, Drawer, Layout } from 'antd';\nimport {\n  imagePath,\n  useCurrentUser,\n  usePrsdigg,\n  useUserAgent,\n} from 'apps/shared';\nimport { useSwitchLocaleMutation } from 'graphqlTypes';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport MenuComponent from '../MenuComponent/MenuComponent';\n\nexport default function HeaderComponent() {\n  const location = useLocation();\n  const { currentUser } = useCurrentUser();\n  const { i18n } = useTranslation();\n  const [switchLocale] = useSwitchLocaleMutation();\n  const history = useHistory();\n  const { appName, logoFile } = usePrsdigg();\n  const { mixinEnv } = useUserAgent();\n  const [drawerVisible, setDrawerVisible] = useState(false);\n  const [showBack, setShowBack] = useState(location.pathname !== '/');\n\n  useEffect(() => {\n    setShowBack(location.pathname !== '/');\n  }, [location.pathname]);\n\n  useEffect(() => {\n    if (!currentUser) {\n      return;\n    }\n    if (currentUser.locale !== i18n.language) {\n      switchLocale({ variables: { input: { locale: i18n.language } } });\n    }\n    i18n.on('languageChanged', (lng: string) => {\n      switchLocale({ variables: { input: { locale: lng } } });\n    });\n  }, []);\n\n  return (\n    <>\n      <div className='sticky top-0 z-50 flex items-center px-2 py-1 bg-white md:hidden shadow-sm'>\n        {showBack && (\n          <LeftIcon\n            className='text-gray-500'\n            size='1.5rem'\n            onClick={() => {\n              if (history.length <= 1) {\n                history.replace('/');\n              } else {\n                history.goBack();\n              }\n            }}\n          />\n        )}\n        <div className='flex items-center' onClick={() => history.replace('/')}>\n          <img className='w-8 h-8 mx-2' src={imagePath(logoFile)} />\n          <span className='text-lg font-semibold'>{appName}</span>\n        </div>\n        <Button\n          className='ml-auto text-gray-500'\n          type='link'\n          size='large'\n          onClick={() => setDrawerVisible(true)}\n          icon={<MenuOutlined />}\n        />\n        <div className={mixinEnv && 'w-24'} />\n      </div>\n      <Drawer\n        bodyStyle={{ padding: 0 }}\n        visible={drawerVisible}\n        closable={false}\n        onClose={() => setDrawerVisible(false)}\n        placement='right'\n      >\n        <div className='mt-12'>\n          <MenuComponent mode='vertical' setDrawerVisible={setDrawerVisible} />\n        </div>\n      </Drawer>\n      <Layout.Header\n        className='hidden md:block'\n        style={{\n          WebkitBoxShadow: '0 2px 8px #f0f1f2',\n          background: '#fff',\n          boxShadow: '0 2px 8px #f0f1f2',\n          padding: 0,\n          zIndex: 10,\n        }}\n      >\n        <MenuComponent mode='horizontal' />\n      </Layout.Header>\n    </>\n  );\n}\n","import React, { Suspense } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport LoadingComponent from './components/LoadingComponent/LoadingComponent';\nconst ArticlePage = React.lazy(() => import('./pages/ArticlePage/ArticlePage'));\nconst ArticlesPage = React.lazy(\n  () => import('./pages/ArticlesPage/ArticlesPage'),\n);\nconst FairPage = React.lazy(() => import('./pages/FairPage/FairPage'));\nconst HomePage = React.lazy(() => import('./pages/HomePage/HomePage'));\nconst NotFoundPage = React.lazy(\n  () => import('./pages/NotFoundPage/NotFoundPage'),\n);\nconst RulesPage = React.lazy(() => import('./pages/RulesPage/RulesPage'));\nconst SearchPage = React.lazy(() => import('./pages/SearchPage/SearchPage'));\nconst UserPage = React.lazy(() => import('./pages/UserPage/UserPage'));\n\nexport default function Routes() {\n  return (\n    <>\n      <Suspense fallback={<LoadingComponent />}>\n        <Switch>\n          <Route path='/' exact>\n            <HomePage />\n          </Route>\n          <Route path='/articles/:uuid' exact>\n            <ArticlePage />\n          </Route>\n          <Route path='/articles' exact>\n            <ArticlesPage />\n          </Route>\n          <Route path='/users/:mixinId' exact>\n            <UserPage />\n          </Route>\n          <Route path='/search' exact>\n            <SearchPage />\n          </Route>\n          <Route path='/rules' exact>\n            <RulesPage />\n          </Route>\n          <Route path='/fair' exact>\n            <FairPage />\n          </Route>\n          <Route>\n            <NotFoundPage />\n          </Route>\n        </Switch>\n      </Suspense>\n    </>\n  );\n}\n","import ReactOnRails from 'react-on-rails';\nimport ApplicationApp from '../apps/application/App';\nimport '../stylesheets/application.css';\n\n// This is how react_on_rails can see the HelloWorld in the browser.\nReactOnRails.register({\n  ApplicationApp,\n});\n","import { Col, Layout, Row } from 'antd';\nimport { AppWrapperComponent } from 'apps/shared';\nimport { i18nCall } from 'apps/shared/locales/i18n';\n// https://github.com/apollographql/apollo-client/issues/6381\nimport 'core-js/features/promise';\nimport { User } from 'graphqlTypes';\nimport React from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport HeaderComponent from './components/HeaderComponent/HeaderComponent';\nimport Routes from './Routes';\n\nexport default function App(props: {\n  csrfToken: string;\n  currentUser?: Partial<User>;\n  prsdigg: { appId: string; pageTitle?: string; attachmentEndpoint?: string };\n  defaultLocale: 'en' | 'ja' | 'zh-CN';\n  availableLocales: [string];\n}) {\n  i18nCall(props.availableLocales);\n\n  return (\n    <AppWrapperComponent {...props}>\n      <Router>\n        <Layout>\n          <HeaderComponent />\n          <Layout.Content className='p-4 bg-white'>\n            <div className='flex justify-center'>\n              <div className='w-full xl:max-w-5xl'>\n                <Routes />\n              </div>\n            </div>\n          </Layout.Content>\n        </Layout>\n      </Router>\n    </AppWrapperComponent>\n  );\n}\n"],"names":["LoadingComponent","style","width","padding","textAlign","LoginModalComponent","props","children","t","useTranslation","useState","visible","setVisible","loading","setLoading","messenger","usePrsdigg","React","onClick","title","centered","maskClosable","onCancel","footer","spinning","className","location","replace","encodeURIComponent","href","src","imagePath","OPEN_SOURCE_URL","CHINESE_MIXIN_GROUP_AVATAR_URL","CHINESE_MIXIN_GROUP_DESCRIPTION","CHINESE_MIXIN_GROUP_APP_ID","CHINESE_MIXIN_GROUP_CODE_ID","handleTagShare","tag","mixinEnv","appId","logoFile","tagUrl","origin","id","data","action","app_id","description","articlesCount","icon_url","name","handleShare","url","appCardData","encode64","JSON","stringify","copy","message","ArticleShareButton","useUserAgent","twitterAccount","appName","article","shareUrl","uuid","trigger","overlay","key","author","slice","handleArticleShare","ShareAltOutlined","TwitterShareButton","hashtags","tagNames","via","TwitterIcon","size","round","FacebookShareButton","quote","hashtag","FacebookIcon","CopyOutlined","MenuComponent","currentUser","useCurrentUser","mode","setDrawerVisible","i18n","createArticle","useCreateArticleMutation","update","_","toggleDrawer","justify","flexWrap","flexDirection","avatar","to","flex","theme","selectable","target","GithubOutlined","languages","length","GlobalOutlined","language","includes","map","lng","changeLanguage","dot","unreadNotificationsCount","NotificationOutlined","HeaderComponent","useLocation","switchLocale","useSwitchLocaleMutation","history","useHistory","drawerVisible","pathname","showBack","setShowBack","useEffect","locale","variables","input","on","Left","goBack","type","icon","MenuOutlined","bodyStyle","closable","onClose","placement","WebkitBoxShadow","background","boxShadow","zIndex","ArticlePage","ArticlesPage","FairPage","HomePage","NotFoundPage","RulesPage","SearchPage","UserPage","Routes","Suspense","fallback","path","exact","ReactOnRails","ApplicationApp","i18nCall","availableLocales"],"sourceRoot":""}